(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-page-login-page"],{2290:function(e,i,t){"use strict";t.r(i);var n=t("6217"),a=t("4648");for(var o in a)"default"!==o&&function(e){t.d(i,e,(function(){return a[e]}))}(o);t("f1dc");var r,l=t("f0c5"),s=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"52f41817",null,!1,n["a"],r);i["default"]=s.exports},"3adc":function(e,i,t){"use strict";(function(e){var n=t("4ea4");t("d3b7"),t("07ac"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("96cf");var a=n(t("1da1")),o=n(t("0338")),r=n(t("deb3")),l={name:"login-page",components:{inputBox:o.default,"tfgg-verify":r.default},computed:{emailId:{get:function(){return uni.getStorageSync("emailId")||""},set:function(e){uni.setStorageSync("emailId",e)}}},data:function(){return{login:{email:null,psw:null},singup:{name:null,email:null,psw:null},toLogin:!0,time:"",code:"",emailErr:"",lastPage:"pages/tabBar/user/user"}},methods:{jiaoyan:function(){var e="singup",i="login",t={name:"Name",email:"Email",code:"Code",password:"Password"},n=Object.values(t),a=!0;if(this.toLogin){for(var o=0;o<n.length;o++)"Name"!=n[o]&&"Code"!=n[o]&&(this.$refs["".concat(i).concat(n[o])].getValue()||(a=!1));return a}for(var r=0,l=Object.values(t);r<l.length;r++){var s=l[r];""==this.$refs["".concat(e).concat(s)].getValue()&&!0===a&&(a=!1)}return""==this.$refs["singupCode"].getValue()&&(a=!1),a},loginSubmit:function(){var i=this;return(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.jiaoyan()){t.next=2;break}return t.abrupt("return");case 2:i.$refs.verifyElement.aaa().then(function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.ret){e.next=4;break}return uni.showLoading(),e.next=4,i.$store.dispatch("h5").then((function(e){e.h5Login({login:i.login,lastPage:i.lastPage})}));case 4:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}()).catch((function(i){return e.log(i)})),i.$refs.verifyElement.show();case 4:case"end":return t.stop()}}),t)})))()},singupSubmit:function(){var i=this;return(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.jiaoyan()){t.next=2;break}return t.abrupt("return");case 2:i.$refs.verifyElement.aaa().then(function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==n.ret){t.next=3;break}return t.next=3,i.$api.sendEmail({code:i.code,method:"validateCode",email:i.singup.email,codeId:i.emailId,effectiveTime:500}).then((function(t){if(1!=t.result.status)return 0==t.result.status?(uni.showToast({title:"验证码错误",icon:"none"}),e.log("验证码错误"),new Promise((function(e,i){}))):(uni.showToast({title:"验证码失效",icon:"none"}),e.log("验证码失效"),new Promise((function(e,i){})));uni.removeStorage({key:"emailId"}),setTimeout((function(){uni.showToast({title:"注册成功，即将进入登录页",icon:"none"}),i.login.email=i.singup.email,i.changeTo()}),1500)})).then((0,a.default)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(JSON.stringify(i.singup)),t.platform="H5-EMAIL",t.type="singup",n=t,e.next=6,i.$store.dispatch("h5").then((function(e){e.h5Register(n)}));case 6:case"end":return e.stop()}}),e)}))));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(i){return e.log(i)})),i.$refs.verifyElement.show();case 4:case"end":return t.stop()}}),t)})))()},changeTo:function(){this.toLogin=!this.toLogin},sendEmail:function(){var i=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==i.time){t.next=2;break}return t.abrupt("return");case 2:if(n=i.$refs["singupEmail"].getValue(),n){t.next=5;break}return t.abrupt("return");case 5:return uni.showToast({title:"",icon:"loading"}),t.next=8,i.$api.hasEmail({email:n}).then((function(e){""!=i.emailErr&&(i.emailErr="")})).catch((function(e){return i.emailErr=e.msg,new Promise((function(e,i){}))})).then((0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.$api.sendEmail({serviceType:"163",method:"sendCode",html:"验证码: #code#,有效时间:5分钟内.",email:i.singup.email,subject:"注册验证码"}).then((function(e){i.emailId=e.result.id,uni.showToast({title:"发送成功",icon:"none"}),i.countdown()})).catch((function(i){return e.log(i)}));case 2:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))()},countdown:function(){var e,i=this,t=60;t>0&&(e=setInterval((function(){t--,i.time=t,t<=0&&(i.time="",clearInterval(e))}),1e3))},forgetPsw:function(){uni.navigateTo({url:"/pages/forget-password/forget-password"})}},onLoad:function(e){e.page&&(this.lastPage=JSON.parse(decodeURIComponent(window.atob(e.page))))}};i.default=l}).call(this,t("5a52")["default"])},"3db1":function(e,i,t){var n=t("24fb");i=n(!1),i.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-52f41817]{width:100%;height:100%;background-color:#efeeee}.login-page[data-v-52f41817]{padding-top:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:100%}.login-page > .login-page__header[data-v-52f41817]{padding:%?24?%;margin:%?16?%;border-radius:%?12?%;color:#666;font-weight:500;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.login-page > .login-page__header uni-text[data-v-52f41817]{font-size:%?30?%}.login-page > .login-page__header .login-page__header__title[data-v-52f41817]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:auto;color:#555}.login-page > .login-page__header .login-page__header__title .logo[data-v-52f41817]{width:%?75?%;height:%?75?%;border-radius:50%;margin-right:%?20?%}.login-page > .login-page__header .login-page__header__title uni-text[data-v-52f41817]{font-size:%?70?%;font-weight:700}.login-page > .login-page__header .login-page__header__other uni-text[data-v-52f41817]:last-child{color:#6f95a8}.login-page > .login-page__main[data-v-52f41817]{padding:%?24?%;margin-top:%?40?%}.login-page > .login-page__main .login-page__main__form .form-field .form-field__title[data-v-52f41817]{color:#555;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.login-page > .login-page__main .login-page__main__form .form-field .form-field__container[data-v-52f41817]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;box-sizing:border-box}.login-page > .login-page__main .login-page__main__form .form-field .form-field__container .form-field__container__input[data-v-52f41817]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.login-page > .login-page__main .login-page__main__form .form-field .form-field__container .form-field__container__get-code[data-v-52f41817]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:30%;color:#6f95a8}.login-page > .login-page__main .login-page__main__form .form-field .submit_btn[data-v-52f41817]{margin:0;color:#666;background-color:#f1aaa1;box-shadow:3px 5px 10px #c79a97,-4px -5px 10px #fff}.login-page > .login-page__main .login-page__main__form .form-field .el-hover[data-v-52f41817]{opacity:.9;box-shadow:0 0 0 #e7a0a0,0 0 0 #ffb4ab,inset %?20?% %?20?% %?10?% #e7a0a0,inset %?-20?% %?-20?% %?10?% #ffb4ab!important}.login-page > .login-page__main .login-page__main__form .form-field.btn-control[data-v-52f41817]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:%?40?%}.login-page > .login-page__main .login-page__main__form .form-field.btn-control .forgetPsw[data-v-52f41817]{color:#6f95a8;font-size:%?24?%}.login-page > .login-page__footer[data-v-52f41817]{padding:10px;margin:%?80?% %?12?%;border-radius:5px;color:#666;font-size:%?30?%}.login-page > .login-page__footer .login-page__footer__other-login[data-v-52f41817]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.login-page > .login-page__footer .login-page__footer__other-login .login-page__footer__other-login-item[data-v-52f41817]{width:%?100?%;height:%?100?%;margin:%?20?%}.login-page > .login-page__footer .login-page__footer__other-login .login-page__footer__other-login-item uni-image[data-v-52f41817]{width:100%;height:100%;border-radius:50%}.login-page > .login-page__footer .login-page__footer__other-login .login-page__footer__other-login-item[data-v-52f41817]:first-child{margin-left:0}.login-page > .login-page__footer .login-page__footer__other-login .login-page__footer__other-login-item[data-v-52f41817]:last-child{margin-right:0}.error[data-v-52f41817]{color:#f1aaa1;font-size:%?24?%;margin-left:%?10?%}body.?%PAGE?%[data-v-52f41817]{background-color:#efeeee}',""]),e.exports=i},4648:function(e,i,t){"use strict";t.r(i);var n=t("3adc"),a=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(i,e,(function(){return n[e]}))}(o);i["default"]=a.a},6217:function(e,i,t){"use strict";t.d(i,"b",(function(){return a})),t.d(i,"c",(function(){return o})),t.d(i,"a",(function(){return n}));var n={inputBox:t("0338").default,tfggVerify:t("deb3").default},a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-uni-view",{staticClass:"login-page"},[t("v-uni-view",{staticClass:"login-page__header "},[t("v-uni-view",{staticClass:"login-page__header__title"},[t("v-uni-image",{staticClass:"logo",attrs:{src:"/static/logo.png",mode:"aspectFit"}}),t("v-uni-text",[e._v(e._s(e.toLogin?"登录":"注册"))])],1),e.toLogin?t("v-uni-view",{staticClass:"login-page__header__other"},[t("v-uni-text",[e._v("没有帐号，")]),t("v-uni-text",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.changeTo.apply(void 0,arguments)}}},[e._v("点击注册")])],1):t("v-uni-view",{staticClass:"login-page__header__other"},[t("v-uni-text",[e._v("已有帐号，")]),t("v-uni-text",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.changeTo.apply(void 0,arguments)}}},[e._v("点击登录")])],1)],1),t("v-uni-view",{staticClass:"login-page__main"},[t("v-uni-view",{staticClass:"login-page__main__form"},[e.toLogin?t("v-uni-view",{staticClass:"form-cell"},[t("v-uni-view",{staticClass:"form-field"},[t("v-uni-text",{staticClass:"form-field__title"},[e._v("邮箱")]),t("input-box",{key:"loginemail",ref:"loginEmail",attrs:{type:"text",verification:["isNull","isEmail"],verificationTip:["邮箱号不能为空","邮箱格式不正确"],maTop:"15",maBtm:"15"},model:{value:e.login.email,callback:function(i){e.$set(e.login,"email",i)},expression:"login.email"}})],1),t("v-uni-view",{staticClass:"form-field"},[t("v-uni-text",{staticClass:"form-field__title"},[e._v("密码")]),t("input-box",{key:"loginpassword",ref:"loginPassword",attrs:{type:"password",verification:["isNull","isPassword"],verificationTip:["密码不能为空","密码由数字、字母和英文标点符号中至少两种组成，且长度在6-16位"],maTop:"15",maBtm:"15"},model:{value:e.login.psw,callback:function(i){e.$set(e.login,"psw",i)},expression:"login.psw"}})],1),t("v-uni-view",{staticClass:"form-field btn-control"},[t("v-uni-button",{staticClass:"submit_btn",attrs:{"hover-class":"el-hover","hover-stay-time":"100","hover-start-time":"0",size:"mini"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.loginSubmit.apply(void 0,arguments)}}},[e._v("登录")]),t("v-uni-text",{staticClass:"forgetPsw",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.forgetPsw.apply(void 0,arguments)}}},[e._v("忘记密码")])],1)],1):t("v-uni-view",{staticClass:"form-cell"},[t("v-uni-view",{staticClass:"form-field"},[t("v-uni-text",{staticClass:"form-field__title"},[e._v("用户名")]),t("input-box",{key:"singupname",ref:"singupName",attrs:{type:"text",verification:["isNull","name"],verificationTip:["用户名不能为空","用户名由 4 ~ 10 位字符组成"],maTop:"15",maBtm:"15"},model:{value:e.singup.name,callback:function(i){e.$set(e.singup,"name",i)},expression:"singup.name"}})],1),t("v-uni-view",{staticClass:"form-field"},[t("v-uni-view",{staticClass:"form-field__title"},[t("v-uni-text",[e._v("邮箱")]),""!=e.emailErr?t("v-uni-text",{staticClass:"error"},[e._v(e._s("*"+e.emailErr))]):e._e()],1),t("input-box",{key:"singupemail",ref:"singupEmail",attrs:{type:"text",verification:["isNull","isEmail"],verificationTip:["邮箱不能为空","邮箱格式不正确"],maTop:"15",maBtm:"15"},model:{value:e.singup.email,callback:function(i){e.$set(e.singup,"email",i)},expression:"singup.email"}})],1),t("v-uni-view",{staticClass:"form-field"},[t("v-uni-text",{staticClass:"form-field__title"},[e._v("验证码")]),t("v-uni-view",{staticClass:"form-field__container"},[t("input-box",{ref:"singupCode",staticClass:"form-field__container__input",attrs:{type:"text",verification:["isNull","code"],verificationTip:["验证码不能为空","请输入6位有效验证码"],maTop:"15",maBtm:"15"},model:{value:e.code,callback:function(i){e.code=i},expression:"code"}}),t("v-uni-view",{staticClass:"form-field__container__get-code",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.sendEmail.apply(void 0,arguments)}}},[e._v(e._s(""===e.time?"发送验证码":e.time+"s 后获取"))])],1)],1),t("v-uni-view",{staticClass:"form-field"},[t("v-uni-text",{staticClass:"form-field__title"},[e._v("密码")]),t("input-box",{ref:"singupPassword",attrs:{type:"password",verification:["isNull","isPassword"],verificationTip:["密码不能为空","密码由数字、字母和英文标点符号中至少两种组成，且长度在6-16位"],maTop:"15",maBtm:"15"},model:{value:e.singup.psw,callback:function(i){e.$set(e.singup,"psw",i)},expression:"singup.psw"}})],1),t("v-uni-view",{staticClass:"form-field btn-control"},[t("v-uni-button",{staticClass:"submit_btn",attrs:{"hover-class":"el-hover","hover-stay-time":"100","hover-start-time":"0",size:"mini"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.singupSubmit.apply(void 0,arguments)}}},[e._v("注册")])],1)],1)],1)],1),e._e(),t("tfgg-verify",{ref:"verifyElement"})],1)},o=[]},7849:function(e,i,t){var n=t("3db1");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=t("4f06").default;a("816d6168",n,!0,{sourceMap:!1,shadowMode:!1})},f1dc:function(e,i,t){"use strict";var n=t("7849"),a=t.n(n);a.a}}]);